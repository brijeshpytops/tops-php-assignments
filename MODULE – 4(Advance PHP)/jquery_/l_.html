<!-- Get state data by country selection (Ajax). -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <select id="country" onchange="getStates()">
        <option value="">Select Country</option>
        <option value="usa">USA</option>
        <option value="canada">Canada</option>
        <!-- Add more options as needed -->
    </select>

    <select id="state">
        <option value="">Select State</option>
    </select>

    <script>
        function getStates() {
            var country = document.getElementById("country").value;
            var stateDropdown = document.getElementById("state");

            // Clear previous options
            stateDropdown.innerHTML = '<option value="">Select State</option>';

            if (country !== "") {
                var xhr = new XMLHttpRequest();
                xhr.open("GET", "get_states.php?country=" + country, true);
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === XMLHttpRequest.DONE) {
                        if (xhr.status === 200) {
                            var states = JSON.parse(xhr.responseText);
                            states.forEach(function (state) {
                                var option = document.createElement("option");
                                option.text = state.name;
                                option.value = state.code;
                                stateDropdown.appendChild(option);
                            });
                        } else {
                            console.error("Error fetching states: " + xhr.statusText);
                        }
                    }
                };
                xhr.send();
            }
        }

    </script>

</body>

</html>